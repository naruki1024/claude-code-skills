# Claude Code インタラクティブモード - 完全リファレンス

## キーボードショートカット

キーボードショートカットはプラットフォームとターミナルによって異なる場合があります。`?`を押すと、お使いの環境で利用可能なショートカットが表示されます。

### 一般的なコントロール

| ショートカット | 説明 | コンテキスト |
|---|---|---|
| `Ctrl+C` | 現在の入力または生成をキャンセル | 標準割り込み |
| `Ctrl+D` | Claude Codeセッションを終了 | EOFシグナル |
| `Ctrl+L` | ターミナル画面をクリア | 会話履歴を保持 |
| `Ctrl+O` | 詳細出力を切り替え | 詳細なツール使用と実行を表示 |
| `Ctrl+R` | コマンド履歴を逆順検索 | 前のコマンドをインタラクティブに検索 |
| `Ctrl+V` (macOS/Linux) または `Alt+V` (Windows) | クリップボードから画像を貼り付け | 画像またはイメージファイルへのパスを貼り付け |
| `上下矢印` | コマンド履歴をナビゲート | 前の入力を呼び出し |
| `Esc` + `Esc` | コード/会話を巻き戻す | コードおよび/または会話を前の状態に復元 |
| `Tab` | [拡張思考](https://docs.claude.com/ja/docs/build-with-claude/extended-thinking)を切り替え | 思考オンと思考オフを切り替え |
| `Shift+Tab` または `Alt+M` (一部の設定) | 権限モードを切り替え | 自動受け入れモード、プランモード、通常モードを切り替え |

### 複数行入力

| 方法 | ショートカット | コンテキスト |
|---|---|---|
| クイック終了 | `\` + `Enter` | すべてのターミナルで動作 |
| macOS デフォルト | `Option+Enter` | macOS のデフォルト |
| ターミナル設定 | `Shift+Enter` | `/terminal-setup` の後 |
| 制御シーケンス | `Ctrl+J` | 複数行のラインフィード文字 |
| ペーストモード | 直接貼り付け | コードブロック、ログの場合 |

**ヒント:** ターミナル設定で優先される改行動作を設定します。`/terminal-setup`を実行して、iTerm2およびVS Codeターミナル用のShift+Enterバインディングをインストールします。

### クイックコマンド

| ショートカット | 説明 | 注記 |
|---|---|---|
| `#` で開始 | メモリショートカット - CLAUDE.mdに追加 | ファイル選択を促す |
| `/` で開始 | スラッシュコマンド | [スラッシュコマンド](/docs/ja/slash-commands)を参照 |
| `!` で開始 | Bashモード | コマンドを直接実行し、実行出力をセッションに追加 |
| `@` | ファイルパスメンション | ファイルパスオートコンプリートをトリガー |

---

## Vimエディタモード

`/vim`コマンドでVimスタイルの編集を有効にするか、`/config`で永続的に設定します。

### モード切り替え

| コマンド | アクション | モードから |
|---|---|---|
| `Esc` | NORMALモードに入る | INSERT |
| `i` | カーソルの前に挿入 | NORMAL |
| `I` | 行の開始に挿入 | NORMAL |
| `a` | カーソルの後に挿入 | NORMAL |
| `A` | 行の終了に挿入 | NORMAL |
| `o` | 下に行を開く | NORMAL |
| `O` | 上に行を開く | NORMAL |

### ナビゲーション (NORMALモード)

| コマンド | アクション |
|---|---|
| `h`/`j`/`k`/`l` | 左/下/上/右に移動 |
| `w` | 次の単語 |
| `e` | 単語の終了 |
| `b` | 前の単語 |
| `0` | 行の開始 |
| `$` | 行の終了 |
| `^` | 最初の空白以外の文字 |
| `gg` | 入力の開始 |
| `G` | 入力の終了 |

### 編集 (NORMALモード)

| コマンド | アクション |
|---|---|
| `x` | 文字を削除 |
| `dd` | 行を削除 |
| `D` | 行の終了まで削除 |
| `dw`/`de`/`db` | 単語を削除/終了まで/戻す |
| `cc` | 行を変更 |
| `C` | 行の終了まで変更 |
| `cw`/`ce`/`cb` | 単語を変更/終了まで/戻す |
| `.` | 最後の変更を繰り返す |

---

## コマンド履歴

Claude Codeは現在のセッションのコマンド履歴を保持します:

- 履歴は作業ディレクトリごとに保存されます
- `/clear`コマンドでクリアされます
- 上下矢印を使用してナビゲートします (上記のキーボードショートカットを参照)
- **注記**: 履歴展開 (`!`) はデフォルトで無効です

### Ctrl+Rを使用した逆順検索

`Ctrl+R`を押してコマンド履歴をインタラクティブに検索します:

1. **検索を開始**: `Ctrl+R`を押して逆順履歴検索をアクティブにします
2. **クエリを入力**: 前のコマンドで検索するテキストを入力します - 検索用語は一致する結果で強調表示されます
3. **一致をナビゲート**: `Ctrl+R`を再度押して、より古い一致をサイクルします
4. **一致を受け入れ**:
   - `Tab`または`Esc`を押して現在の一致を受け入れ、編集を続けます
   - `Enter`を押して一致を受け入れ、コマンドをすぐに実行します
5. **検索をキャンセル**:
   - `Ctrl+C`を押して検索をキャンセルし、元の入力を復元します
   - 空の検索で`Backspace`を押してキャンセルします

検索は検索用語が強調表示されたマッチングコマンドを表示し、前の入力を簡単に見つけて再利用できます。

---

## バックグラウンドBashコマンド

Claude Codeはバックグラウンドでbashコマンドを実行することをサポートしており、長時間実行されるプロセスが実行されている間も作業を続けることができます。

### バックグラウンド実行の仕組み

Claude Codeがコマンドをバックグラウンドで実行する場合、コマンドを非同期で実行し、すぐにバックグラウンドタスクIDを返します。Claude Codeはコマンドがバックグラウンドで実行され続けている間、新しいプロンプトに応答できます。

コマンドをバックグラウンドで実行するには、以下のいずれかを実行できます:

- Claude Codeにコマンドをバックグラウンドで実行するよう指示します
- Ctrl+Bを押して、通常のBashツール呼び出しをバックグラウンドに移動します。(Tmuxユーザーはtmuxのプレフィックスキーのため、Ctrl+Bを2回押す必要があります。)

**主な機能:**

- 出力はバッファリングされ、Claude はBashOutputツールを使用して取得できます
- バックグラウンドタスクには追跡と出力取得用の一意のIDがあります
- バックグラウンドタスクはClaude Code終了時に自動的にクリーンアップされます

**一般的なバックグラウンド実行コマンド:**

- ビルドツール (webpack、vite、make)
- パッケージマネージャー (npm、yarn、pnpm)
- テストランナー (jest、pytest)
- 開発サーバー
- 長時間実行されるプロセス (docker、terraform)

### `!` プレフィックス付きBashモード

入力に`!`をプレフィックスとして付けることで、Claudeを経由せずにbashコマンドを直接実行します:

```shellscript
! npm test
! git status
! ls -la
```

Bashモード:

- コマンドとその出力を会話コンテキストに追加します
- リアルタイムの進行状況と出力を表示します
- 長時間実行されるコマンド用に同じ`Ctrl+B`バックグラウンド実行をサポートします
- Claudeがコマンドを解釈または承認する必要はありません

これは会話コンテキストを維持しながら、クイックシェル操作に便利です。

---

## 関連項目

- [スラッシュコマンド](/docs/ja/slash-commands) - インタラクティブセッションコマンド
- [チェックポイント](/docs/ja/checkpointing) - Claudeの編集を巻き戻し、前の状態を復元
- [CLIリファレンス](/docs/ja/cli-reference) - コマンドラインフラグとオプション
- [設定](/docs/ja/settings) - 設定オプション
- [メモリ管理](/docs/ja/memory) - CLAUDE.mdファイルの管理
