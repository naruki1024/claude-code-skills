# Claude Code - チェックポイント（Checkpointing）

## 概要
Claude Codeの編集を自動的に追跡し、巻き戻して、不要な変更から素早く復旧します。

## チェックポイントの仕組み

Claude Codeで作業する際、チェックポイント機能は各編集の前にコードの状態を自動的にキャプチャします。このセーフティネットにより、野心的で大規模なタスクを実行する際に、いつでも以前のコード状態に戻ることができるという安心感を持って作業できます。

### 自動追跡

Claude Codeはファイル編集ツールによるすべての変更を追跡します：

- ユーザープロンプトごとに新しいチェックポイントが作成されます
- チェックポイントはセッション間で保持されるため、再開した会話でアクセスできます
- セッション後30日で自動的にクリーンアップされます（設定可能）

### 変更の巻き戻し

`Esc`キーを2回押す（`Esc` + `Esc`）か、`/rewind`コマンドを使用して巻き戻しメニューを開きます。以下のいずれかを復元することを選択できます：

- **会話のみ**: コード変更を保持しながらユーザーメッセージに巻き戻します
- **コードのみ**: 会話を保持しながらファイル変更を元に戻します
- **コードと会話の両方**: セッション内の以前のポイントに両方を復元します

## 一般的なユースケース

チェックポイントは以下の場合に特に便利です：

- **代替案の検討**: 開始点を失わずに異なる実装アプローチを試します
- **ミスからの復旧**: バグを導入したり機能を破損させた変更を素早く元に戻します
- **機能の反復**: 動作状態に戻すことができるという確信を持ちながら、バリエーションを試験します

## 制限事項

### Bashコマンドの変更は追跡されません

チェックポイント機能は、bashコマンドで変更されたファイルを追跡しません。例えば、Claude Codeが以下を実行する場合：

```bash
rm file.txt
mv old.txt new.txt
cp source.txt dest.txt
```

これらのファイル変更は巻き戻しで元に戻すことはできません。Claudeのファイル編集ツールを通じて直接行われたファイル編集のみが追跡されます。

### 外部の変更は追跡されません

チェックポイント機能は、現在のセッション内で編集されたファイルのみを追跡します。Claude Code外でユーザーが手動で行ったファイルの変更や、他の同時セッションからの編集は、通常はキャプチャされません。ただし、現在のセッションと同じファイルを変更する場合は除きます。

### バージョン管理の代替ではありません

チェックポイントは、セッションレベルの迅速な復旧用に設計されています。永続的なバージョン履歴とコラボレーションのために：

- バージョン管理（例：Git）を引き続き使用してコミット、ブランチ、長期履歴を管理します
- チェックポイントは適切なバージョン管理を補完しますが、置き換えるものではありません
- チェックポイントを「ローカルアンドゥ」、Gitを「永続履歴」と考えてください

## 関連項目

- [インタラクティブモード](/ja/interactive-mode) - キーボードショートカットとセッションコントロール
- [スラッシュコマンド](/ja/slash-commands) - `/rewind`を使用したチェックポイントへのアクセス
- [CLIリファレンス](/ja/cli-reference) - コマンドラインオプション
