# レビューチェックリスト

## CHECKPOINT 一覧

| CHECKPOINT | タイミング | 確認観点 | 重要度 |
|------------|-----------|---------|--------|
| 親Issue | Phase 1完了後 | フロント整合性、Query/Command設計 | 必須 |
| サブIssue分解 | Phase 2完了後 | 粒度・依存関係・順序 | 必須 |
| 振る舞い定義 | Phase 3完了後 | describe/itの仕様反映 | **最重要** |
| テストデータ | Phase 4完了後 | Arrange/Act/Assertの妥当性 | 必須 |
| 実装 | Phase 5完了後 | 過剰実装・命名・品質 | 必須 |

---

## 1. 親Issueレビュー

```markdown
【フロント整合性】
- [ ] フロント実装の全セクションに対応するQuery/Commandがあるか
- [ ] フロントで表示しているデータがすべてカバーされているか
- [ ] フロントのコンポーネント構造とサブIssue分解が対応しているか

【仕様整合性】
- [ ] 対象画面・URLは正しいか
- [ ] 洗い出したQuery/Commandに漏れはないか
- [ ] 必要なDBテーブルは網羅されているか

【MVPスコープ】
- [ ] MVPスコープに含まれる機能のみか
- [ ] フロントでMVP除外されている機能がバックエンドに含まれていないか
```

---

## 2. サブIssue分解レビュー

```markdown
- [ ] サブイシューの粒度は「1テストファイルで完結できる責務」になっているか
      - 1サブイシューに複数の責務が混在していないか
      - 逆に細かすぎて効率が悪くなっていないか
- [ ] 依存関係の順序は妥当か
      - 依存元から実装できる順序になっているか
      - 循環依存がないか
- [ ] 漏れている振る舞い・エッジケースはないか
      - 仕様書に記載されている機能がすべて含まれているか
      - エラーケースや境界値が考慮されているか
- [ ] テストケースの数は適切か
      - 1サブイシューあたり10個以上のテストケースがある場合は分割検討
```

---

## 3. 振る舞い定義レビュー（最重要）

```markdown
- [ ] describe の日本語説明が仕様を正しく反映しているか
- [ ] it の振る舞い記述が「実装」ではなく「振る舞い」になっているか
      ✅ 良い: 「公開中の講座のみが取得されること」
      ❌ 悪い: 「SQLクエリが正しいこと」
- [ ] 正常系・異常系・境界値のカバレッジは十分か
- [ ] テストケースが多すぎないか（10個以上なら分割を検討）
- [ ] 1つの it で1つの振る舞いになっているか
```

---

## 4. テストデータ・アサーションレビュー

```markdown
- [ ] Arrange: テストデータは仕様の意図を正しく表現しているか
      - データの値は業務的に妥当か
      - 必要なパターン（境界値含む）が網羅されているか
- [ ] Act: 呼び出し方は想定ユースケースと一致しているか
      - 引数の渡し方は正しいか
      - オプションパラメータの扱いは適切か
- [ ] Assert: 期待値は仕様通りか
      - 境界値のアサーションは正しいか
      - エラーケースのアサーションは適切か
- [ ] DBスキーマとの整合性は取れているか
      - テストデータのフィールドはスキーマに存在するか
      - 型が一致しているか
- [ ] マジックナンバーがなく、意味のある変数名になっているか
```

---

## 5. 実装・リファクタリングレビュー

```markdown
- [ ] テストが全てパスしているか（Green状態）
- [ ] 過剰な実装をしていないか（YAGNI原則）
      - テストをパスする以上のコードを書いていないか
      - 「将来必要になりそう」な機能を先に実装していないか
- [ ] 過度な抽象化・複雑化がないか
      - 必要以上にクラス/関数を分割していないか
      - 過剰なジェネリクスやパターン適用がないか
- [ ] 命名は適切か（役割+対象: getCourseList など）
- [ ] TypeScript/Lint エラーがないか
- [ ] 1ファイル300行を超えていないか
```

---

## よくある指摘パターン

### サブIssue分解

```
- 「{サブイシュー}は{A}と{B}に分割した方がよい」
- 「{エッジケース}が漏れています」
- 「{サブイシューA}と{B}の順序を入れ替えた方がよい」
```

### 振る舞い定義

```
- 「{it名}を{新しい表現}に変更してください」
- 「{観点}のテストケースを追加してください」
- 「{it名}は仕様外なので削除してください」
```

### テストデータ

```
- 「テストデータの{フィールド}は{値}にすべき（理由: {業務ルール}）」
- 「{条件}の場合のアサーションが不足しています」
- 「{境界値}のテストが必要です」
```

### 実装

```
- 「{関数名}は{新しい名前}の方が意図が明確です」
- 「{処理}は分割せずにインラインのままでよいです」
- 「{共通化}は過剰です、このままでよいです」
```
